<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<?xml-stylesheet type="text/xsl" href="callbacks.xsl"?>

<plugin name="simEvents" author="federico.ferri.it@gmail.com">
    <description>API functions for events</description>
    <command name="addProbe">
        <description>Add a event probe.</description>
        <params>
            <param name="callback" type="string" />
            <param name="conditionHandle" type="string" nullable="true" default="nil" />
        </params>
        <return>
            <param name="probeHandle" type="string" />
        </return>
    </command>
    <command name="removeProbe">
        <description>Remove a previously created event probe.</description>
        <params>
            <param name="probeHandle" type="string" />
        </params>
    </command>
    <command name="setProbeCondition">
        <description>Set the condition for an event probe to call the callback.</description>
        <params>
            <param name="probeHandle" type="string" />
            <param name="conditionHandle" type="string" />
        </params>
    </command>
    <command name="addAndCondition">
        <description>Add a "AND" condition.</description>
        <params>
            <param name="conditionHandles" type="table" item-type="string" />
        </params>
        <return>
            <param name="conditionHandle" type="string" />
        </return>
    </command>
    <command name="addOrCondition">
        <description>Add a "OR" condition.</description>
        <params>
            <param name="conditionHandles" type="table" item-type="string" />
        </params>
        <return>
            <param name="conditionHandle" type="string" />
        </return>
    </command>
    <command name="addNotCondition">
        <description>Add a "NOT" condition.</description>
        <params>
            <param name="conditionHandle" type="string" />
        </params>
        <return>
            <param name="conditionHandle" type="string" />
        </return>
    </command>
    <command name="addEventTypeCondition">
        <description>Add a condition on the event type.</description>
        <params>
            <param name="eventType" type="string" />
        </params>
        <return>
            <param name="conditionHandle" type="string" />
        </return>
    </command>
    <command name="addHandlesCondition">
        <description>Add a condition on the handle.</description>
        <params>
            <param name="handles" type="table" item-type="int" />
        </params>
        <return>
            <param name="conditionHandle" type="string" />
        </return>
    </command>
    <command name="addUIDsCondition">
        <description>Add a condition on the uid field.</description>
        <params>
            <param name="uids" type="table" item-type="long" />
        </params>
        <return>
            <param name="conditionHandle" type="string" />
        </return>
    </command>
    <command name="addEventDataCondition">
        <description>Add a condition on the a field of the event data.</description>
        <params>
            <param name="fieldName" type="string" />
            <param name="fieldValue" type="string" nullable="true" default="nil" />
        </params>
        <return>
            <param name="conditionHandle" type="string" />
        </return>
    </command>
    <struct name="probe_opts">
        <param name="callback" type="string" nullable="true">
            <description>Callback function to call when a matching event is received.</description>
        </param>
        <param name="eventTypes" type="table" item-type="string" nullable="true">
            <description>Type of events to filter. Set to nil for all events.</description>
        </param>
        <param name="handles" type="table" item-type="int" nullable="true">
            <description>Handles to filter. Set to nil for all events.</description>
        </param>
        <param name="properties" type="table" item-type="string" nullable="true">
            <description>Properties to filter. Set to nil for all properties.</description>
        </param>
    </struct>
</plugin>
